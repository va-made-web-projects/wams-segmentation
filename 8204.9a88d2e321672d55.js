"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8204],{8204:(E,l,o)=>{o.r(l),o.d(l,{Tab2PageModule:()=>w});var r=o(6761),d=o(6814),v=o(95),h=o(3554),m=o(6958),e=o(6689),u=o(6002);const g=["webcam"],b=["webcamCanvas"],f=["imageCanvas"];function p(t,s){1&t&&(e.TgZ(0,"span",11),e._uU(1,"Webcam is not supported by your browser"),e.qZA())}function C(t,s){if(1&t){const c=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(c);const i=e.oxw();return e.KtG(i.enableCam())}),e._uU(1,"Enable Webcam"),e.qZA()}}const T=[{path:"",component:(()=>{var t;class s{constructor(n,i){this.renderer=n,this.faceDetectionService=i,this.previousSegmentationComplete=!0,this.pdmm=0,this.pixelPdDistance=0,this.pixelShoulderWidth=0,this.faceDetectionService.loadModel().then(a=>{console.log("Faces",a),this.faces=a})}hasGetUserMedia(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}ngOnInit(){this.enableCam()}enableCam(){this.videoRenderCanvas=document.createElement("canvas"),this.videoRenderCanvasCtx=this.videoRenderCanvas.getContext("2d"),navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:{ideal:"environment"}}}).then(i=>{const a=this.webcamElement.nativeElement;this.renderer.setProperty(a,"srcObject",i),this.renderer.listen(a,"loadedmetadata",()=>{this.renderer.setProperty(this.webcamCanvasElement.nativeElement,"width",a.videoWidth),this.renderer.setProperty(this.webcamCanvasElement.nativeElement,"height",a.videoHeight),this.videoRenderCanvas.width=a.videoWidth,this.videoRenderCanvas.height=a.videoHeight}),this.renderer.listen(a,"loadeddata",()=>this.predictWebcam())})}processFaceDetection(n){var i;console.log("Faces",this.faces),null===(i=this.faces)||void 0===i||i.estimateFaces(n).then(a=>{console.log("Preds",a),a.forEach(M=>{M.landmarks.forEach(x=>{console.log("Landmark",x)})})})}predictWebcam(){this.videoRenderCanvasCtx.drawImage(this.webcamElement.nativeElement,0,0),window.requestAnimationFrame(this.predictWebcam.bind(this))}}return(t=s).\u0275fac=function(n){return new(n||t)(e.Y36(e.Qsj),e.Y36(u.N))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-tab2"]],viewQuery:function(n,i){if(1&n&&(e.Gf(g,5,e.SBq),e.Gf(b,5,e.SBq),e.Gf(f,5,e.SBq)),2&n){let a;e.iGM(a=e.CRH())&&(i.webcamElement=a.first),e.iGM(a=e.CRH())&&(i.webcamCanvasElement=a.first),e.iGM(a=e.CRH())&&(i.imageCanvas=a)}},decls:15,vars:4,consts:[[3,"translucent"],[3,"fullscreen"],[1,"w-full","h-full","flex","flex-col","items-center"],["class","text-center text-3xl",4,"ngIf"],["class","btn",3,"click",4,"ngIf"],[1,"webcam","relative","pb-2/3","flex-1"],["autoplay","",1,"object-contain","h-96"],["webcam",""],[1,"overlay","object-contain","h-96"],["webcamCanvas",""],["imageCanvas",""],[1,"text-center","text-3xl"],[1,"btn",3,"click"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3," Tab 2 "),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"div",2),e.YNc(6,p,2,0,"span",3),e.YNc(7,C,2,0,"button",4),e.TgZ(8,"div",5),e._UZ(9,"video",6,7)(11,"canvas",8,9)(13,"canvas",8,10),e.qZA()()()),2&n&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(2),e.Q6J("ngIf",!i.hasGetUserMedia()),e.xp6(1),e.Q6J("ngIf",i.hasGetUserMedia()&&!i.videoRenderCanvas))},dependencies:[r.W2,r.Gu,r.wd,r.sr,d.O5]}),s})()}];let P=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.Bz.forChild(T),m.Bz]}),s})(),w=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[r.Pc,d.ez,v.u5,h.e,P]}),s})()}}]);